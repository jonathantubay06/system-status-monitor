<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>System Status Monitor</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=IBM+Plex+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg: #0a0c08;
  --surface: #12140e;
  --surface2: #191c14;
  --surface3: #1e2218;
  --border: #272d1e;
  --border2: #323a24;
  --green: #8cc470;
  --green-glow: rgba(140,196,112,0.08);
  --green-dim: #3d5c28;
  --yellow: #d4b44e;
  --yellow-glow: rgba(212,180,78,0.07);
  --red: #d46450;
  --red-glow: rgba(212,100,80,0.07);
  --text: #d0cbba;
  --text-dim: #7e7e66;
  --text-bright: #f0ecdf;
  --accent: #a4c47a;
  --softr: #74a8d4;
  --custom: #c88ad6;
  --shopify: #a0c752;
  --input-bg: #0e100b;
  --radius: 6px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'IBM Plex Mono', monospace;
  font-size: 16px;
  font-weight: 500;
  line-height: 1.6;
  min-height: 100vh;
}

body::after {
  content: '';
  position: fixed; inset: 0;
  background:
    radial-gradient(ellipse at 15% -5%, rgba(140,196,112,0.04) 0%, transparent 55%),
    radial-gradient(ellipse at 85% 105%, rgba(116,168,212,0.03) 0%, transparent 55%);
  pointer-events: none; z-index: 0;
}

/* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
header {
  position: relative; z-index: 10;
  padding: 2rem 3rem 1.8rem;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: flex-end; justify-content: space-between; gap: 2rem;
}
.logo h1 {
  font-family: 'DM Serif Display', serif;
  font-size: 2rem;
  color: var(--text-bright);
  letter-spacing: -0.01em;
}
.logo p {
  font-size: 0.82rem;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--text-dim);
  margin-top: 0.3rem;
  font-weight: 600;
}

.header-right { display: flex; align-items: center; gap: 1rem; }

.last-updated {
  text-align: right;
  font-size: 0.85rem;
  color: var(--text-dim);
  letter-spacing: 0.03em;
  line-height: 1.6;
  font-weight: 500;
}
.last-updated span {
  display: block;
  color: var(--text);
  font-size: 0.9rem;
  font-weight: 600;
}

.btn {
  background: none;
  border: 1px solid var(--border2);
  color: var(--accent);
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.82rem;
  font-weight: 600;
  padding: 0.6rem 1.3rem;
  cursor: pointer;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  transition: all 0.2s;
  white-space: nowrap;
  border-radius: var(--radius);
}
.btn:hover { border-color: var(--accent); background: rgba(154,184,114,0.07); }
.btn.primary { background: var(--green); color: #0d1a08; border-color: var(--green); font-weight: 600; }
.btn.primary:hover { background: #9ad47a; border-color: #9ad47a; }
.btn.danger { color: var(--red); border-color: #3a1a10; }
.btn.danger:hover { border-color: var(--red); background: var(--red-glow); }
.btn.admin-btn { color: var(--text-dim); }
.btn.admin-btn:hover, .btn.admin-btn.active { color: var(--accent); border-color: var(--accent); }

/* ‚îÄ‚îÄ Banner ‚îÄ‚îÄ */
.banner {
  position: relative; z-index: 1;
  margin: 1.8rem 3rem;
  padding: 1.4rem 2rem;
  border: 1px solid var(--border2);
  border-left: 3px solid var(--green);
  background: var(--green-glow);
  display: flex; align-items: center; gap: 1.2rem;
  transition: all 0.4s;
  border-radius: var(--radius);
}
.banner.warn { border-left-color: var(--yellow); background: var(--yellow-glow); }
.banner.bad  { border-left-color: var(--red);    background: var(--red-glow); }

.pulse {
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--green); flex-shrink: 0;
  animation: pulse 2.5s infinite;
}
.banner.warn .pulse { background: var(--yellow); }
.banner.bad  .pulse { background: var(--red); animation: none; }
@keyframes pulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(140,196,112,0.5); }
  50% { box-shadow: 0 0 0 6px rgba(140,196,112,0); }
}

.banner-text { font-size: 1.15rem; color: var(--text-bright); font-weight: 600; }
.banner-sub  { font-size: 0.85rem; color: var(--text-dim); margin-top: 0.2rem; font-weight: 500; }
.banner-stats {
  margin-left: auto; display: flex; gap: 2.5rem;
  font-size: 0.78rem; color: var(--text-dim);
  letter-spacing: 0.06em; text-transform: uppercase;
  font-weight: 600; text-align: center;
}
.banner-stats strong { display: block; font-size: 1.5rem; color: var(--text-bright); font-weight: 600; margin-bottom: 0.15rem; }

/* ‚îÄ‚îÄ Filter bar ‚îÄ‚îÄ */
.filter-bar {
  position: relative; z-index: 1;
  padding: 0 3rem 1.8rem;
  display: flex; gap: 0.6rem; flex-wrap: wrap; align-items: center;
}
.filter-btn {
  background: none; border: 1px solid var(--border); color: var(--text-dim);
  font-family: 'IBM Plex Mono', monospace; font-size: 0.82rem;
  padding: 0.45rem 1.1rem; cursor: pointer; font-weight: 600;
  letter-spacing: 0.1em; text-transform: uppercase;
  transition: all 0.2s; border-radius: var(--radius);
}
.filter-btn:hover, .filter-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(154,184,114,0.07); }
.filter-btn.softr-f   { border-color: var(--softr);   color: var(--softr); }
.filter-btn.shopify-f { border-color: var(--shopify); color: var(--shopify); }

/* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
.grid {
  position: relative; z-index: 1;
  display: grid; grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 1px; padding: 0 3rem; background: var(--border);
}

.card {
  background: var(--surface); padding: 1.6rem 1.8rem;
  position: relative; overflow: hidden;
  transition: background 0.25s; animation: fadeUp 0.4s ease both;
  display: flex; flex-direction: column;
}
.card:hover { background: var(--surface2); }
@keyframes fadeUp { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

.card-top { position:absolute; top:0; left:0; right:0; height:2px; }
.card-top.op   { background: var(--green); }
.card-top.deg  { background: var(--yellow); }
.card-top.down { background: var(--red); }
.card-top.unk  { background: var(--border2); }

.card-header { margin-bottom:1.2rem; gap:0.6rem; min-height: 5.5rem; }
.card-title-row { display:flex; align-items:baseline; gap:0.6rem; flex-wrap:wrap; }
.card-title  { font-family:'DM Serif Display',serif; font-size:1.35rem; color:var(--text-bright); line-height:1.3; }

.type-badge {
  font-size:0.72rem; letter-spacing:0.15em; text-transform:uppercase; font-weight:600;
  padding:0.22rem 0.65rem; border:1px solid; flex-shrink:0; margin-top:0.15rem; border-radius:3px;
}
.type-badge.softr   { color:var(--softr);   border-color:rgba(116,168,212,0.3); }
.type-badge.shopify { color:var(--shopify); border-color:rgba(160,199,82,0.3); }
.type-badge.custom  { color:var(--custom);  border-color:rgba(200,138,214,0.3); }

.status-pill {
  font-size:0.75rem; letter-spacing:0.1em; text-transform:uppercase; font-weight:600;
  padding:0.28rem 0.75rem; border:1px solid; white-space:nowrap; flex-shrink:0; border-radius:3px;
}
.status-pill.op   { color:var(--green);    border-color:var(--green-dim); }
.status-pill.deg  { color:var(--yellow);   border-color:#4a3c10; }
.status-pill.down { color:var(--red);      border-color:#4a1f0f; }
.status-pill.unk  { color:var(--text-dim); border-color:var(--border); }

.card-url { font-size:0.82rem; color:var(--text-dim); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:260px; font-weight:500; }
.card-meta { display:flex; gap:0.6rem; align-items:center; margin-top:0.3rem; }

.metrics { display:grid; grid-template-columns:1fr 1fr; gap:0.7rem; margin-bottom:1.2rem; }
.metric { background:rgba(0,0,0,0.25); border:1px solid var(--border); padding:0.75rem 1rem; border-radius:var(--radius); }
.metric-label { font-size:0.75rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--text-dim); margin-bottom:0.35rem; font-weight:600; }
.metric-value { font-size:1.6rem; font-weight:700; color:var(--green); line-height:1; }
.metric-value.slow { color:var(--yellow); }
.metric-value.bad  { color:var(--red); }

.spark-label { display:flex; justify-content:space-between; font-size:0.75rem; letter-spacing:0.08em; text-transform:uppercase; color:var(--text-dim); margin-bottom:0.5rem; font-weight:600; }
.sparkline { display:flex; gap:2px; height:28px; align-items:flex-end; }
.sb { flex:1; border-radius:2px; min-width:3px; cursor:default; transition:opacity 0.15s; }
.sb:hover { opacity:0.6; }
.sb.op   { background:var(--green);   height:100%; }
.sb.deg  { background:var(--yellow);  height:55%; }
.sb.down { background:var(--red);     height:25%; }
.sb.unk  { background:var(--border2); height:4px; }

.card-error { margin-top:0.9rem; padding:0.6rem 0.9rem; background:var(--red-glow); border:1px solid rgba(212,100,80,0.15); font-size:0.85rem; color:#db7868; word-break:break-all; line-height:1.5; border-radius:var(--radius); font-weight:500; }
.card-alert { font-size:0.78rem; color:var(--text-dim); margin-top:0.9rem; border-top:1px solid var(--border); padding-top:0.7rem; display:flex; align-items:center; gap:0.4rem; font-weight:500; }

.card-actions { display:flex; gap:0.6rem; margin-top:0.9rem; border-top:1px solid var(--border); padding-top:0.8rem; }
.card-actions .btn { font-size:0.72rem; padding:0.35rem 0.8rem; }

/* ‚îÄ‚îÄ Components ‚îÄ‚îÄ */
.components-section { margin-top:auto; border-top:1px solid var(--border); padding-top:0.8rem; }
.comp-label { font-size:0.72rem; letter-spacing:0.15em; text-transform:uppercase; color:var(--text-dim); margin-bottom:0.5rem; font-weight:600; }
.comp-row { display:flex; justify-content:space-between; align-items:center; padding:0.35rem 0; }
.comp-name { font-size:0.88rem; color:var(--text); font-weight:500; }
.comp-status { font-size:0.75rem; letter-spacing:0.08em; text-transform:uppercase; font-weight:600; }
.comp-status.op   { color:var(--green); }
.comp-status.deg  { color:var(--yellow); }
.comp-status.down { color:var(--red); }

/* ‚îÄ‚îÄ Log Modal ‚îÄ‚îÄ */
.log-modal {
  background:var(--surface); border:1px solid var(--border2);
  padding:2.2rem; width:100%; max-width:680px;
  position:relative; animation:slideUp 0.25s ease;
  max-height:80vh; overflow-y:auto; border-radius:var(--radius);
}
.log-modal-title { font-family:'DM Serif Display',serif; font-size:1.4rem; color:var(--text-bright); margin-bottom:0.3rem; }
.log-modal-time  { font-size:0.85rem; color:var(--text-dim); letter-spacing:0.06em; margin-bottom:1.8rem; font-weight:500; }
.log-site { margin-bottom:1.3rem; border:1px solid var(--border); padding:1rem 1.2rem; border-radius:var(--radius); }
.log-site-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.8rem; }
.log-site-name { font-size:1rem; color:var(--text-bright); font-weight:600; }
.log-site-meta  { font-size:0.82rem; color:var(--text-dim); margin-top:0.15rem; font-weight:500; }
.log-comp-row   { display:flex; justify-content:space-between; padding:0.3rem 0; border-top:1px solid var(--border); }
.log-comp-name  { font-size:0.85rem; color:var(--text); font-weight:500; }
.log-comp-status { font-size:0.75rem; letter-spacing:0.08em; text-transform:uppercase; font-weight:600; }
.log-comp-status.op   { color:var(--green); }
.log-comp-status.deg  { color:var(--yellow); }
.log-comp-status.down { color:var(--red); }
.log-error { margin-top:0.6rem; padding:0.5rem 0.8rem; background:var(--red-glow); border:1px solid rgba(212,100,80,0.15); font-size:0.75rem; color:#db7868; border-radius:var(--radius); }
.history-table tr.clickable { cursor:pointer; }
.history-table tr.clickable:hover td { background:var(--surface2); }

/* ‚îÄ‚îÄ Admin Login Modal ‚îÄ‚îÄ */
.overlay {
  position:fixed; inset:0; background:rgba(0,0,0,0.85);
  display:flex; align-items:center; justify-content:center; z-index:100;
  backdrop-filter:blur(6px); animation:fadeIn 0.2s ease;
}
.overlay.hidden { display:none; }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

.modal {
  background:var(--surface); border:1px solid var(--border2);
  padding:2.2rem; width:100%; max-width:440px;
  position:relative; animation:slideUp 0.25s ease; border-radius:var(--radius);
}
@keyframes slideUp { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

.modal-title { font-family:'DM Serif Display',serif; font-size:1.5rem; color:var(--text-bright); margin-bottom:0.5rem; }
.modal-sub   { font-size:0.88rem; color:var(--text-dim); letter-spacing:0.05em; margin-bottom:1.8rem; font-weight:500; }

.close-btn {
  position:absolute; top:1.2rem; right:1.2rem;
  background:none; border:none; color:var(--text-dim); cursor:pointer; font-size:1.2rem;
  transition:color 0.2s;
}
.close-btn:hover { color:var(--text); }

/* ‚îÄ‚îÄ Forms ‚îÄ‚îÄ */
.form-group { margin-bottom:1.1rem; }
.form-label { font-size:0.8rem; letter-spacing:0.12em; text-transform:uppercase; color:var(--text-dim); display:block; margin-bottom:0.45rem; font-weight:600; }
.form-input, .form-select {
  width:100%; background:var(--input-bg); border:1px solid var(--border2);
  color:var(--text-bright); font-family:'IBM Plex Mono',monospace; font-size:0.95rem;
  font-weight:500; padding:0.78rem 1rem; outline:none; transition:border-color 0.2s;
  appearance:none; -webkit-appearance:none; border-radius:var(--radius);
}
.form-input:focus, .form-select:focus { border-color:var(--accent); }
.form-input::placeholder { color:var(--text-dim); }
.form-input.error { border-color:var(--red); }

.form-select-wrap { position:relative; }
.form-select-wrap::after {
  content:'‚ñæ'; position:absolute; right:1rem; top:50%; transform:translateY(-50%);
  color:var(--text-dim); pointer-events:none; font-size:0.9rem;
}

.form-row { display:grid; grid-template-columns:1fr 1fr; gap:0.9rem; }
.form-hint { font-size:0.78rem; color:var(--text-dim); margin-top:0.35rem; letter-spacing:0.03em; font-weight:500; }
.form-error { font-size:0.85rem; color:var(--red); margin-top:0.35rem; font-weight:500; }

.input-with-toggle { position:relative; }
.input-with-toggle .form-input { padding-right:3rem; }
.pw-toggle {
  position:absolute; right:0.5rem; top:50%; transform:translateY(-50%);
  background:none; border:1px solid var(--border); color:var(--text-dim);
  width:2rem; height:2rem; border-radius:var(--radius);
  cursor:pointer; font-size:0.9rem; display:flex; align-items:center; justify-content:center;
  transition:all 0.2s; line-height:1;
}
.pw-toggle:hover { border-color:var(--accent); color:var(--accent); }
.pw-toggle.active { color:var(--accent); border-color:var(--accent); background:rgba(154,184,114,0.07); }
.form-actions { display:flex; gap:0.7rem; justify-content:flex-end; margin-top:1.8rem; }

/* ‚îÄ‚îÄ Admin Panel (side drawer) ‚îÄ‚îÄ */
.admin-panel {
  position:fixed; top:0; right:0; bottom:0; width:460px;
  background:var(--surface); border-left:1px solid var(--border2);
  z-index:50; transform:translateX(100%); transition:transform 0.3s ease;
  display:flex; flex-direction:column; overflow:hidden;
}
.admin-panel.open { transform:translateX(0); }

.admin-header {
  padding:1.6rem 1.8rem; border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between; flex-shrink:0;
}
.admin-header h2 { font-family:'DM Serif Display',serif; font-size:1.4rem; color:var(--text-bright); }
.admin-header p  { font-size:0.8rem; color:var(--text-dim); letter-spacing:0.08em; text-transform:uppercase; margin-top:0.25rem; font-weight:600; }

.admin-body { flex:1; overflow-y:auto; padding:1.8rem; }

.admin-section-title {
  font-size:0.8rem; letter-spacing:0.18em; text-transform:uppercase; font-weight:600;
  color:var(--text-dim); margin-bottom:1.1rem; padding-bottom:0.6rem; border-bottom:1px solid var(--border);
}

.admin-project-list { margin-bottom:1.8rem; }
.admin-project-item {
  display:flex; align-items:center; gap:0.9rem;
  padding:0.8rem 1rem; border:1px solid var(--border); margin-bottom:0.5rem;
  background:var(--surface2); transition:border-color 0.2s; border-radius:var(--radius);
}
.admin-project-item:hover { border-color:var(--border2); }
.api-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.api-dot.op { background:var(--green); }
.api-dot.down { background:var(--red); }
.api-dot.deg { background:var(--yellow); }
.api-dot.unk { background:var(--text-dim); }

.api-info { flex:1; min-width:0; }
.api-name { font-size:0.95rem; color:var(--text-bright); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; font-weight:600; }
.api-meta { font-size:0.8rem; color:var(--text-dim); margin-top:0.2rem; font-weight:500; }

.api-actions { display:flex; gap:0.5rem; flex-shrink:0; }
.icon-btn {
  background:none; border:1px solid var(--border); color:var(--text-dim);
  width:32px; height:32px; cursor:pointer; font-size:0.85rem;
  display:flex; align-items:center; justify-content:center; transition:all 0.2s; border-radius:var(--radius);
}
.icon-btn:hover.edit-btn  { border-color:var(--accent); color:var(--accent); }
.icon-btn:hover.del-btn   { border-color:var(--red); color:var(--red); }

.admin-form-wrap { border:1px solid var(--border2); padding:1.4rem; background:var(--surface3); border-radius:var(--radius); }
.admin-form-title { font-size:0.82rem; letter-spacing:0.1em; text-transform:uppercase; color:var(--accent); margin-bottom:1.1rem; font-weight:600; }

/* Toast */
.toast {
  position:fixed; bottom:2rem; right:2rem; z-index:200;
  padding:0.8rem 1.4rem; border:1px solid var(--green-dim);
  background:var(--surface); color:var(--green); font-size:0.92rem;
  font-weight:600; letter-spacing:0.03em; transform:translateY(10px); opacity:0;
  transition:all 0.3s; pointer-events:none; border-radius:var(--radius);
}
.toast.show { transform:translateY(0); opacity:1; }
.toast.err  { color:var(--red); border-color:#3a1a10; }

.panel-overlay {
  position:fixed; inset:0; background:rgba(0,0,0,0.5);
  z-index:40; display:none; backdrop-filter:blur(3px);
}
.panel-overlay.show { display:block; }

.state-msg { position:relative; z-index:1; text-align:center; padding:5rem 2rem; color:var(--text-dim); font-size:1rem; letter-spacing:0.08em; font-weight:500; }
.state-msg.err { color:var(--red); }

/* History */
.history-wrap { position:relative; z-index:1; padding:2.5rem 3rem 4rem; }
.section-label { font-size:0.8rem; letter-spacing:0.2em; text-transform:uppercase; color:var(--text-dim); margin-bottom:1.2rem; padding-bottom:0.6rem; border-bottom:1px solid var(--border); font-weight:600; }
.history-scroll { overflow-x:auto; }
.history-table { width:100%; border-collapse:collapse; font-size:0.88rem; min-width:500px; font-weight:500; }
.history-table th { text-align:left; padding:0.6rem 0.9rem; color:var(--text-dim); font-weight:600; letter-spacing:0.08em; font-size:0.78rem; text-transform:uppercase; border-bottom:1px solid var(--border); white-space:nowrap; }
.history-table td { padding:0.6rem 0.9rem; border-bottom:1px solid rgba(39,45,30,0.5); white-space:nowrap; }
.history-table tr:hover td { background:var(--surface); }
.ht-dot { display:inline-block; width:8px; height:8px; border-radius:50%; margin-right:0.4rem; vertical-align:middle; }
.ht-dot.op { background:var(--green); } .ht-dot.down { background:var(--red); } .ht-dot.deg { background:var(--yellow); } .ht-dot.unk { background:var(--text-dim); }

footer {
  position:relative; z-index:1;
  padding:2.5rem 3rem;
  border-top:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
  flex-wrap:wrap; gap:1rem;
}
.footer-left {
  display:flex; flex-direction:column; gap:0.3rem;
}
.footer-brand {
  font-family:'DM Serif Display',serif;
  font-size:1.05rem; color:var(--text-bright);
}
.footer-tech {
  font-size:0.75rem; color:var(--text-dim);
  letter-spacing:0.08em; font-weight:500;
}
.footer-right {
  display:flex; align-items:center; gap:0.6rem;
  font-size:0.78rem; color:var(--text-dim); font-weight:500;
}
.footer-right a {
  color:var(--accent); text-decoration:none;
  font-weight:600; letter-spacing:0.03em;
  padding:0.35rem 0.9rem;
  border:1px solid var(--border2);
  border-radius:var(--radius);
  transition:all 0.2s;
}
.footer-right a:hover {
  border-color:var(--accent);
  background:rgba(154,184,114,0.07);
  color:var(--text-bright);
}
@media(max-width:768px) {
  footer { flex-direction:column; text-align:center; align-items:center; }
}

@media(max-width:768px) {
  header,.filter-bar,.banner,.history-wrap { padding-left:1.5rem; padding-right:1.5rem; }
  .grid { padding:0 1.5rem; grid-template-columns:1fr; background:none; gap:1rem; }
  .card { border:1px solid var(--border); border-radius:var(--radius); }
  .banner-stats { display:none; }
  header { flex-direction:column; align-items:flex-start; }
  .admin-panel { width:100%; }
}
</style>
</head>
<body>

<!-- Header -->
<header>
  <div class="logo">
    <h1>System Status</h1>
    <p>Health Monitor Dashboard</p>
  </div>
  <div class="header-right">
    <div class="last-updated">Last checked<span id="lastChecked">‚Äî</span></div>
    <button class="btn" onclick="loadStatus()">‚Üª Refresh</button>
    <button class="btn admin-btn" id="adminToggle" onclick="openAdmin()">‚öô Manage</button>
  </div>
</header>

<!-- Banner -->
<div class="banner" id="banner">
  <div class="pulse"></div>
  <div>
    <div class="banner-text" id="bannerText">Loading...</div>
    <div class="banner-sub"  id="bannerSub"></div>
  </div>
  <div class="banner-stats" id="bannerStats"></div>
</div>

<!-- Filter bar -->
<div class="filter-bar" id="filterBar" style="display:none">
  <button class="filter-btn active" onclick="setFilter('all',this)">All</button>
  <button class="filter-btn" onclick="setFilter('softr',this)">Softr</button>
  <button class="filter-btn" onclick="setFilter('shopify',this)">Shopify</button>
  <button class="filter-btn" onclick="setFilter('custom',this)">Custom</button>
  <button class="filter-btn" onclick="setFilter('down',this)">Issues Only</button>
</div>

<!-- Cards -->
<div id="gridWrap"><div class="state-msg">Fetching status data...</div></div>

<!-- History -->
<div class="history-wrap">
  <div class="section-label">Recent Check History</div>
  <div class="history-scroll">
    <table class="history-table">
      <thead><tr id="historyHead"></tr></thead>
      <tbody id="historyBody"><tr><td colspan="10" style="color:var(--text-dim);padding:1rem 0">Loading...</td></tr></tbody>
    </table>
  </div>
</div>

<footer>
  <div class="footer-left">
    <div class="footer-brand">System Status Monitor</div>
    <div class="footer-tech">Playwright ¬∑ GitHub Actions ¬∑ Google Sheets</div>
  </div>
  <div class="footer-right">
    Built by Jonathan Tubay
    <a href="https://jonathantubay.com/" target="_blank" rel="noopener">jonathantubay.com ‚Üó</a>
  </div>
</footer>

<!-- ‚îÄ‚îÄ Admin Login Modal ‚îÄ‚îÄ -->
<div class="overlay hidden" id="loginModal">
  <div class="modal">
    <button class="close-btn" onclick="closeLogin()">‚úï</button>
    <div class="modal-title">Admin Access</div>
    <div class="modal-sub">Enter your admin password to manage projects</div>
    <div class="form-group">
      <label class="form-label">Password</label>
      <div class="input-with-toggle">
        <input type="password" class="form-input" id="loginPassword" placeholder="Enter admin password" onkeydown="if(event.key==='Enter')submitLogin()"/>
        <button type="button" class="pw-toggle" onclick="togglePw('loginPassword', this)" title="Show password">üëÅ</button>
      </div>
      <div class="form-error" id="loginError"></div>
    </div>
    <div class="form-actions">
      <button class="btn" onclick="closeLogin()">Cancel</button>
      <button class="btn primary" onclick="submitLogin()">Unlock ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ Panel overlay ‚îÄ‚îÄ -->
<div class="panel-overlay" id="panelOverlay" onclick="closeAdminPanel()"></div>

<!-- ‚îÄ‚îÄ Admin Panel (drawer) ‚îÄ‚îÄ -->
<div class="admin-panel" id="adminPanel">
  <div class="admin-header">
    <div>
      <h2>Manage Projects</h2>
      <p>Add ¬∑ Edit ¬∑ Remove monitored sites</p>
    </div>
    <button class="close-btn" style="position:static" onclick="closeAdminPanel()">‚úï</button>
  </div>
  <div class="admin-body">
    <div class="admin-section-title">Current Projects</div>
    <div class="admin-project-list" id="adminProjectList">
      <div style="color:var(--text-dim);font-size:0.82rem">Loading...</div>
    </div>

    <div class="admin-section-title" id="formSectionTitle">Add New Project</div>
    <div class="admin-form-wrap">
      <div class="admin-form-title" id="formTitle">NEW PROJECT</div>
      <input type="hidden" id="editAirtableId"/>
      <div class="form-group">
        <label class="form-label">Project Name</label>
        <input type="text" class="form-input" id="fName" placeholder="e.g. Jordan Ranch Portal"/>
      </div>
      <div class="form-group">
        <label class="form-label">Type</label>
        <div class="form-select-wrap">
          <select class="form-select" id="fType" onchange="onTypeChange()">
            <option value="softr">Softr (Magic Link)</option>
            <option value="shopify">Shopify (Storefront URL)</option>
            <option value="custom">Custom Website (Email / Password)</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" id="urlLabel">Magic Link URL</label>
        <input type="text" class="form-input" id="fUrl" placeholder="https://app.softr.app/magic-authentication?magic-token=..."/>
        <div class="form-hint" id="urlHint">Paste the full magic link from your Softr app</div>
      </div>
      <div class="form-group" id="checkPageGroup" style="display:none">
        <label class="form-label">Check Page <span style="color:var(--text-dim);font-weight:normal">(optional)</span></label>
        <input type="text" class="form-input" id="fCheckPage" placeholder="/events or /bonds"/>
        <div class="form-hint">Path to navigate after login to verify data loads (e.g. /events)</div>
      </div>
      <div class="form-group" id="loginCredsGroup" style="display:none">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Login Email</label>
            <input type="email" class="form-input" id="fLoginEmail" placeholder="user@example.com"/>
          </div>
          <div class="form-group">
            <label class="form-label">Login Password</label>
            <div class="input-with-toggle">
              <input type="password" class="form-input" id="fLoginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>
              <button type="button" class="pw-toggle" onclick="togglePw('fLoginPassword', this)" title="Show password">üëÅ</button>
            </div>
          </div>
        </div>
        <div class="form-hint">Credentials used to log in to the custom website</div>
      </div>
      <div class="form-group">
        <label class="form-label">Alert Email</label>
        <input type="email" class="form-input" id="fEmail" placeholder="you@email.com"/>
      </div>
      <div class="form-error" id="formError"></div>
      <div class="form-actions">
        <button class="btn" onclick="resetForm()">Clear</button>
        <button class="btn primary" id="submitBtn" onclick="submitProject()">Add Project ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- Log Detail Modal -->
<div class="overlay hidden" id="logModal">
  <div class="log-modal">
    <button class="close-btn" onclick="closeLogModal()">‚úï</button>
    <div class="log-modal-title">Check Details</div>
    <div class="log-modal-time" id="logModalTime"></div>
    <div id="logModalBody"></div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
let allResults  = [];
let allHistory  = [];
let adminToken  = sessionStorage.getItem('adminToken') || '';
let currentFilter = 'all';
let editMode    = false;

const sc = s => s==='operational'?'op':s==='down'?'down':s==='degraded'?'deg':'unk';
const sl = s => s==='operational'?'Operational':s==='down'?'Down':s==='degraded'?'Degraded':'Unknown';

function fmt(iso) {
  return new Date(iso).toLocaleString('en-US',{month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',hour12:true});
}
function fmtS(iso) {
  return new Date(iso).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',hour12:false});
}
function maskUrl(url) {
  try { return new URL(url).hostname; } catch { return (url||'').slice(0,28)+'‚Ä¶'; }
}
function uptime(id) {
  const e = allHistory.flatMap(h=>(h.results||[]).filter(r=>r.id===id));
  if(!e.length) return '‚Äî';
  return ((e.filter(r=>r.status==='operational').length/e.length)*100).toFixed(2)+'%';
}
function sparkline(id) {
  const bars = allHistory.slice(-48).map(e=>{
    const r = (e.results||[]).find(r=>r.id===id);
    return `<div class="sb ${r?sc(r.status):'unk'}" title="${fmtS(e.timestamp)}${r?': '+sl(r.status)+' ('+r.responseMs+'ms)':''}"></div>`;
  });
  while(bars.length<48) bars.unshift('<div class="sb unk"></div>');
  return bars.join('');
}

function showToast(msg, isErr=false) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast show' + (isErr?' err':'');
  setTimeout(()=>t.className='toast',3000);
}

async function loadStatus() {
  try {
    const [sRes, hRes] = await Promise.all([
      fetch('https://raw.githubusercontent.com/jonathantubay06/system-status-monitor/main/dashboard/status.json?t='+Date.now()),
      fetch('https://raw.githubusercontent.com/jonathantubay06/system-status-monitor/main/dashboard/history.json?t='+Date.now()).catch(()=>({ok:false})),
    ]);
    if(!sRes.ok) throw new Error('status.json not found ‚Äî run monitor first');
    const status = await sRes.json();
    allHistory   = hRes.ok ? await hRes.json() : [];
    allResults   = status.results || [];

    document.getElementById('lastChecked').textContent = fmt(status.updatedAt);

    const total = allResults.length;
    const down  = allResults.filter(r=>r.status==='down').length;
    const deg   = allResults.filter(r=>r.status==='degraded').length;
    const op    = allResults.filter(r=>r.status==='operational').length;
    const banner = document.getElementById('banner');
    banner.className = 'banner'+(down?' bad':deg?' warn':'');
    document.getElementById('bannerText').textContent =
      down ? `${down} service${down>1?'s':''} currently down.` :
      deg  ? `${deg} service${deg>1?'s':''} may be degraded.` :
             'All systems operational.';
    document.getElementById('bannerSub').textContent = `Monitoring ${total} project${total!==1?'s':''}`;
    document.getElementById('bannerStats').innerHTML =
      `<div><strong>${op}</strong>Operational</div><div><strong>${deg}</strong>Degraded</div><div><strong>${down}</strong>Down</div>`;

    document.getElementById('filterBar').style.display = 'flex';
    renderCards();
    renderHistory();
  } catch(e) {
    document.getElementById('gridWrap').innerHTML =
      `<div class="state-msg err">‚ö† ${e.message}</div>`;
  }
}

function buildCard(r, delay) {
  const cls  = sc(r.status);
  const slow = r.responseMs > 20000;
  const bad  = r.status === 'down';
  const adminActions = '';
  return `
  <div class="card" style="animation-delay:${delay}ms">
    <div class="card-top ${cls}"></div>
    <div class="card-header">
      <div class="card-title-row">
        <div class="card-title">${r.name}</div>
        <div class="type-badge ${r.type}">${r.type}</div>
      </div>
      <div class="card-url">${maskUrl(r.url)}</div>
      <div class="card-meta" style="margin-top:0.3rem">
        <div class="status-pill ${cls}">${sl(r.status)}</div>
        <span style="font-size:0.78rem;color:var(--text-dim)">every 5min</span>
      </div>
    </div>
    <div class="metrics">
      <div class="metric"><div class="metric-label">Response</div><div class="metric-value ${bad?'bad':slow?'slow':''}">${r.responseMs}ms</div></div>
      <div class="metric"><div class="metric-label">Uptime (24h)</div><div class="metric-value">${uptime(r.id)}</div></div>
    </div>
    <div class="spark-label"><span>4-hour history</span><span style="color:var(--text-dim)">48 checks</span></div>
    <div class="sparkline">${sparkline(r.id)}</div>
    ${r.error?`<div class="card-error">‚ö† ${r.error}</div>`:''}
    ${r.components && r.components.length ? `
    <div class="components-section">
      <div class="comp-label">COMPONENTS</div>
      ${r.components.map(c => `
        <div class="comp-row">
          <span class="comp-name">${c.name}</span>
          <span class="comp-status ${c.status === 'operational' ? 'op' : c.status === 'degraded' ? 'deg' : 'down'}">${c.status}</span>
        </div>`).join('')}
    </div>` : ''}
    ${r.alertEmail?`<div class="card-alert">‚óè Alerts ‚Üí ${r.alertEmail}</div>`:''}
  </div>`;
}

function setFilter(f, btn) {
  currentFilter = f;
  document.querySelectorAll('.filter-btn').forEach(b=>b.className='filter-btn');
  btn.className = 'filter-btn active';
  renderCards();
}

function renderCards() {
  const filtered = allResults.filter(r=>{
    if(currentFilter==='all')  return true;
    if(currentFilter==='down') return r.status!=='operational';
    return r.type===currentFilter;
  });
  if(!filtered.length) {
    document.getElementById('gridWrap').innerHTML='<div class="state-msg">No projects match this filter.</div>';
    return;
  }
  document.getElementById('gridWrap').innerHTML =
    `<div class="grid">${filtered.map((r,i)=>buildCard(r,i*60)).join('')}</div>`;
}

let historyLimit = 10;

function renderHistory() {
  if(!allResults.length) return;
  document.getElementById('historyHead').innerHTML =
    '<th>Time</th>'+allResults.map(r=>`<th>${r.name}</th>`).join('');
  
  const recent = allHistory.slice(-historyLimit).reverse();
  const rows = recent.map((e, i)=>{
    const idx = allHistory.length - 1 - i;
    const cells = allResults.map(r=>{
      const found = (e.results||[]).find(x=>x.id===r.id);
      if(!found) return '<td style="color:var(--text-dim)">‚Äî</td>';
      return `<td><span class="ht-dot ${sc(found.status)}"></span>${sl(found.status)} <span style="color:var(--text-dim)">(${found.responseMs}ms)</span></td>`;
    });
    return `<tr class="clickable" onclick="openLogModal(${idx})" title="Click to view details"><td>${fmt(e.timestamp)}</td>${cells.join('')}</tr>`;
  });

  const showMoreBtn = allHistory.length > historyLimit
    ? `<tr><td colspan="${allResults.length+1}" style="text-align:center;padding:0.9rem 0">
        <button class="btn" style="font-size:0.72rem" onclick="loadMoreHistory()">
          ‚Üì Show more (${allHistory.length - historyLimit} older entries)
        </button>
       </td></tr>`
    : '';

  document.getElementById('historyBody').innerHTML =
    (rows.join('') || '<tr><td colspan="10" style="color:var(--text-dim)">No history yet.</td></tr>') + showMoreBtn;
}

function loadMoreHistory() {
  historyLimit = Math.min(historyLimit + 20, allHistory.length);
  renderHistory();
}

function openAdmin() {
  if(adminToken) { openAdminPanel(); return; }
  document.getElementById('loginModal').classList.remove('hidden');
  setTimeout(()=>document.getElementById('loginPassword').focus(),100);
}

function closeLogin() {
  document.getElementById('loginModal').classList.add('hidden');
  document.getElementById('loginPassword').value='';
  document.getElementById('loginError').textContent='';
}

async function submitLogin() {
  const pw = document.getElementById('loginPassword').value.trim();
  if(!pw) return;

  const res = await fetch('/.netlify/functions/get-projects', {
    headers:{ Authorization: `Bearer ${pw}` }
  });
  const testRes = await fetch('/.netlify/functions/add-project', {
    method:'POST',
    headers:{ 'Authorization':`Bearer ${pw}`, 'Content-Type':'application/json' },
    body: JSON.stringify({ __dryRun: true })
  });

  if(testRes.status === 401) {
    document.getElementById('loginError').textContent = 'Incorrect password.';
    return;
  }

  adminToken = pw;
  sessionStorage.setItem('adminToken', pw);
  closeLogin();
  openAdminPanel();
}

function openAdminPanel() {
  document.getElementById('adminPanel').classList.add('open');
  document.getElementById('panelOverlay').classList.add('show');
  loadAdminProjects();
  onTypeChange();
}

function closeAdminPanel() {
  document.getElementById('adminPanel').classList.remove('open');
  document.getElementById('panelOverlay').classList.remove('show');
  resetForm();
}

async function loadAdminProjects() {
  const list = document.getElementById('adminProjectList');
  list.innerHTML = '<div style="color:var(--text-dim);font-size:0.82rem">Loading...</div>';
  try {
    const res  = await fetch('/.netlify/functions/get-projects');
    const data = await res.json();
    if(!data.projects?.length) {
      list.innerHTML = '<div style="color:var(--text-dim);font-size:0.82rem">No projects yet. Add one below.</div>';
      return;
    }
    list.innerHTML = data.projects.map(p=>{
      const status = allResults.find(r=>r.id===p.id);
      const dotCls = status ? sc(status.status) : 'unk';
      return `
      <div class="admin-project-item">
        <div class="api-dot ${dotCls}"></div>
        <div class="api-info">
          <div class="api-name">${p.name}</div>
          <div class="api-meta">${p.type} ¬∑ every 5min${p.alertEmail?' ¬∑ '+p.alertEmail:''}</div>
        </div>
        <div class="api-actions">
          <button class="icon-btn edit-btn" title="Edit" onclick='fillEditForm(${JSON.stringify(p)})'>‚úé</button>
          <button class="icon-btn del-btn"  title="Delete" onclick="deleteProject(${p.airtableId},'${p.name.replace(/'/g,"\\'")}')">‚úï</button>
        </div>
      </div>`;
    }).join('');
  } catch(e) {
    list.innerHTML = `<div style="color:var(--red);font-size:0.82rem">Error: ${e.message}</div>`;
  }
}

function onTypeChange() {
  const type = document.getElementById('fType').value;
  if (type === 'softr') {
    document.getElementById('urlLabel').textContent = 'Magic Link URL';
    document.getElementById('urlHint').textContent  = 'Paste the full magic link from your Softr app';
    document.getElementById('fUrl').placeholder     = 'https://app.softr.app/magic-authentication?magic-token=...';
  } else if (type === 'custom') {
    document.getElementById('urlLabel').textContent = 'Login Page URL';
    document.getElementById('urlHint').textContent  = 'e.g. https://go.kingdomlandkids.com/login';
    document.getElementById('fUrl').placeholder     = 'https://yoursite.com/login';
  } else {
    document.getElementById('urlLabel').textContent = 'Storefront URL';
    document.getElementById('urlHint').textContent  = 'e.g. https://yourstore.myshopify.com';
    document.getElementById('fUrl').placeholder     = 'https://yourstore.myshopify.com';
  }
  document.getElementById('checkPageGroup').style.display  = type === 'softr'  ? 'block' : 'none';
  document.getElementById('loginCredsGroup').style.display = type === 'custom' ? 'block' : 'none';
}

function fillEditForm(p) {
  editMode = true;
  document.getElementById('editAirtableId').value = p.airtableId;
  document.getElementById('fName').value     = p.name;
  document.getElementById('fType').value     = p.type;
  document.getElementById('fUrl').value      = p.url;
  document.getElementById('fEmail').value      = p.alertEmail || '';
  document.getElementById('fCheckPage').value     = p.checkPage || '';
  document.getElementById('fLoginEmail').value    = p.loginEmail || '';
  document.getElementById('fLoginPassword').value = p.loginPassword || '';
  document.getElementById('submitBtn').textContent = 'Save Changes ‚Üí';
  document.getElementById('formTitle').textContent = 'EDITING PROJECT';
  document.getElementById('formSectionTitle').textContent = 'Edit Project';
  onTypeChange();
  document.getElementById('fName').focus();
}

function resetForm() {
  editMode = false;
  document.getElementById('editAirtableId').value = '';
  document.getElementById('fName').value     = '';
  document.getElementById('fType').value     = 'softr';
  document.getElementById('fUrl').value      = '';
  document.getElementById('fEmail').value      = '';
  document.getElementById('fCheckPage').value     = '';
  document.getElementById('fLoginEmail').value    = '';
  document.getElementById('fLoginPassword').value = '';
  document.getElementById('formError').textContent = '';
  document.getElementById('submitBtn').textContent = 'Add Project ‚Üí';
  document.getElementById('formTitle').textContent = 'NEW PROJECT';
  document.getElementById('formSectionTitle').textContent = 'Add New Project';
  onTypeChange();
}

async function submitProject() {
  const name     = document.getElementById('fName').value.trim();
  const type     = document.getElementById('fType').value;
  const url      = document.getElementById('fUrl').value.trim();
  const email      = document.getElementById('fEmail').value.trim();
  const checkPage     = document.getElementById('fCheckPage').value.trim();
  const loginEmail    = document.getElementById('fLoginEmail').value.trim();
  const loginPassword = document.getElementById('fLoginPassword').value.trim();
  const errEl      = document.getElementById('formError');

  if(!name || !url) { errEl.textContent='Name and URL are required.'; return; }
  errEl.textContent = '';

  const btn = document.getElementById('submitBtn');
  btn.textContent = 'Saving...';
  btn.disabled = true;

  try {
    const endpoint = editMode ? '/.netlify/functions/update-project' : '/.netlify/functions/add-project';
    const body = { name, type, url, alertEmail: email, checkPage, loginEmail, loginPassword };
    if(editMode) body.airtableId = document.getElementById('editAirtableId').value;

    const res  = await fetch(endpoint, {
      method:'POST',
      headers:{ Authorization:`Bearer ${adminToken}`, 'Content-Type':'application/json' },
      body: JSON.stringify(body),
    });
    const data = await res.json();
    if(!res.ok) throw new Error(data.error || 'Request failed');

    showToast(editMode ? `"${name}" updated!` : `"${name}" added!`);
    resetForm();
    loadAdminProjects();
  } catch(e) {
    errEl.textContent = e.message;
    showToast(e.message, true);
  } finally {
    btn.textContent = editMode ? 'Save Changes ‚Üí' : 'Add Project ‚Üí';
    btn.disabled = false;
  }
}

async function deleteProject(rowIndex, name) {
  if(!confirm(`Remove "${name}" from monitoring?`)) return;
  try {
    const res  = await fetch('/.netlify/functions/delete-project', {
      method:'POST',
      headers:{ Authorization:`Bearer ${adminToken}`, 'Content-Type':'application/json' },
      body: JSON.stringify({ rowIndex }),
    });
    const data = await res.json();
    if(!res.ok) throw new Error(data.error);
    showToast(`"${name}" removed.`);
    loadAdminProjects();
    loadStatus();
  } catch(e) {
    showToast(e.message, true);
  }
}

function editProject(r) {
  fillEditForm(r);
}

function openLogModal(idx) {
  const entry = allHistory[idx];
  if (!entry) return;

  document.getElementById('logModalTime').textContent = fmt(entry.timestamp);

  const body = (entry.results || []).map(r => {
    const cls = sc(r.status);
    const slow = r.responseMs > 20000;
    const compRows = (r.components || []).map(c => `
      <div class="log-comp-row">
        <span class="log-comp-name">${c.name}</span>
        <span class="log-comp-status ${sc(c.status)}">${c.status}</span>
      </div>`).join('');

    const errorBlock = r.error
      ? `<div class="log-error">‚ö† ${r.error}</div>` : '';

    return `
    <div class="log-site">
      <div class="log-site-header">
        <div>
          <div class="log-site-name">${r.name}</div>
          <div class="log-site-meta">${r.url || ''}</div>
        </div>
        <div>
          <span class="status-pill ${cls}">${sl(r.status)}</span>
          <span style="font-size:0.8rem;color:${slow?'var(--yellow)':'var(--text-dim)'};margin-left:0.5rem">${r.responseMs}ms</span>
        </div>
      </div>
      ${compRows}
      ${errorBlock}
    </div>`;
  }).join('');

  document.getElementById('logModalBody').innerHTML = body || '<div style="color:var(--text-dim);font-size:0.82rem">No details available.</div>';
  document.getElementById('logModal').classList.remove('hidden');
}

function closeLogModal() {
  document.getElementById('logModal').classList.add('hidden');
}

document.getElementById('logModal').addEventListener('click', function(e) {
  if (e.target === this) closeLogModal();
});

// ‚îÄ‚îÄ Password toggle ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function togglePw(inputId, btn) {
  const input = document.getElementById(inputId);
  if (input.type === 'password') {
    input.type = 'text';
    btn.textContent = 'üôà';
    btn.classList.add('active');
  } else {
    input.type = 'password';
    btn.textContent = 'üëÅ';
    btn.classList.remove('active');
  }
  input.focus();
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
loadStatus();
setInterval(loadStatus, 5 * 60 * 1000);
onTypeChange();
</script>
</body>
</html>
